{%- liquid
  assign og_title = page_title | default: shop.name
  assign og_url = canonical_url | default: request.origin
  assign og_type = 'website'
  assign og_description = page_description | default: shop.description | default: shop.name

  if request.page_type == 'product'
    assign og_type = 'product'
  elsif request.page_type == 'article'
    assign og_type = 'article'
  elsif request.page_type == 'password'
    assign og_url = request.origin
  endif

  # Enhanced SEO meta tags - Based on competitor analysis (high-value low-competition keywords)
  assign meta_keywords = ''
  if request.page_type == 'product'
    assign meta_keywords = product.tags | join: ', ' | append: ', personalized african video messages, custom birthday video greetings, african family celebration videos, surprise video messages from africa, authentic african birthday wishes, personalized video gift, custom video greetings, african video messages, video message online'
  elsif request.page_type == 'collection'
    assign meta_keywords = collection.title | append: ', personalized african video messages, custom birthday greetings, family celebration videos, surprise video messages, authentic african wishes, custom video production, african video service, ' | append: shop.name
  elsif request.page_type == 'index'
    assign meta_keywords = 'personalized african video messages, custom birthday video greetings, african family celebration videos, surprise video messages from africa, authentic african birthday wishes, personalized video gift, custom video greetings, african video messages, birthday video messages, anniversary video greetings, family celebration videos'
  endif

  # Optimized OG title and description for higher CTR (based on competitor analysis)
  if request.page_type == 'index'
    assign og_title = 'üé¨ #1 Personalized Video Messages from Africa | 4.8‚òÖ Rating | ' | append: shop.name
    assign og_description = '‚≠ê Create viral personalized video messages from Africa! 2500+ happy customers, 4.8/5 rating. Custom birthday wishes, anniversary greetings & celebration videos. ‚úÖ Fast delivery ‚úÖ Authentic African culture ‚úÖ 100% satisfaction guarantee. Order now!'
  elsif request.page_type == 'product'
    assign og_title = 'üé• ' | append: product.title | append: ' | Best African Video Messages | Fast Delivery'
    assign og_description = 'üåü ' | append: product.title | append: ' - Premium African video messages with 4.8‚òÖ rating. ' | append: product.description | strip_html | truncate: 120 | append: ' ‚úÖ Express delivery ‚úÖ Professional quality ‚úÖ Trending on social media. Order your custom video now!'
  endif
%}

<!-- Enhanced SEO Meta Tags -->
<meta name="description" content="{{ og_description | escape }}">
{%- if meta_keywords != blank -%}
<meta name="keywords" content="{{ meta_keywords | escape }}">
{%- endif -%}
<meta name="author" content="{{ shop.name }}">
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
<meta name="googlebot" content="index, follow">

{%- comment -%}
  Enhanced Open Graph meta tags following Shopify SEO best practices
{%- endcomment -%}

{%- liquid
  # Enhanced title optimization with social proof - 50-60 characters
  if request.page_type == 'product'
    assign og_title_optimized = product.title | append: ' ‚≠ê 4.9/5 | 2576+ Reviews | ' | append: shop.name
    assign og_title_optimized = og_title_optimized | truncate: 60, ''
  elsif request.page_type == 'collection'
    assign og_title_optimized = collection.title | append: ' üé¨ Video Messages ‚≠ê 4.9/5 | ' | append: shop.name
    assign og_title_optimized = og_title_optimized | truncate: 60, ''
  elsif request.page_type == 'index'
    assign og_title_optimized = 'üé¨ ‰∏™ÊÄßÂåñËßÜÈ¢ëÊ∂àÊÅØ ‚≠ê 4.9/5 üë• 2576+ Áî®Êà∑ | ' | append: shop.name
    assign og_title_optimized = og_title_optimized | truncate: 60, ''
  else
    assign og_title_optimized = og_title | truncate: 60, ''
  endif

  # Enhanced description optimization - 150-160 characters
  if request.page_type == 'product'
    assign og_description_optimized = 'Get personalized video messages from Africa. ' | append: product.description | strip_html | truncate: 155, '...'
  elsif request.page_type == 'collection'
    assign og_description_optimized = 'Discover authentic African video greetings. ' | append: collection.description | strip_html | truncate: 155, '...'
  elsif request.page_type == 'index'
    assign og_description_optimized = 'Create unforgettable moments with personalized video messages from Africa. Custom greetings for birthdays, anniversaries & special occasions. Authentic African culture delivered to your loved ones.'
  else
    assign og_description_optimized = og_description | truncate: 155, '...'
  endif
-%}

<!-- Enhanced Open Graph Meta Tags -->
<meta property="og:site_name" content="{{ shop.name }}">
<meta property="og:url" content="{{ og_url }}">
<meta property="og:title" content="{{ og_title_optimized | escape }}">
<meta property="og:type" content="{{ og_type }}">
<meta property="og:description" content="{{ og_description_optimized | escape }}">
<meta property="og:locale" content="{{ request.locale.iso_code }}">

{%- if page_image -%}
  <meta property="og:image" content="https:{{ page_image | image_url: width: 1200, height: 630 }}">
  <meta property="og:image:secure_url" content="https:{{ page_image | image_url: width: 1200, height: 630 }}">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="{{ page_image.alt | default: og_title | escape }}">
{%- else -%}
  {%- comment -%} Fallback image for better social sharing {%- endcomment -%}
  <meta property="og:image" content="{{ 'social-share-default.svg' | asset_url }}">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="{{ shop.name | escape }} - Personalized Video Messages from Africa">
{%- endif -%}

{%- if request.page_type == 'product' -%}
  <meta property="og:price:amount" content="{{ product.price | money_without_currency | strip_html }}">
  <meta property="og:price:currency" content="{{ cart.currency.iso_code }}">
  <meta property="product:availability" content="{% if product.available %}in stock{% else %}out of stock{% endif %}">
  <meta property="product:condition" content="new">
  <meta property="product:brand" content="{{ shop.name }}">
{%- endif -%}

<!-- Enhanced Twitter Card Meta Tags -->
<meta name="twitter:card" content="summary_large_image">
{%- if settings.social_twitter_link != blank -%}
  <meta name="twitter:site" content="@{{ settings.social_twitter_link | split: 'twitter.com/' | last | split: '/' | first }}">
  <meta name="twitter:creator" content="@{{ settings.social_twitter_link | split: 'twitter.com/' | last | split: '/' | first }}">
{%- endif -%}
<meta name="twitter:title" content="{{ og_title_optimized | escape }}">
<meta name="twitter:description" content="{{ og_description_optimized | escape }}">
{%- if page_image -%}
  <meta name="twitter:image" content="https:{{ page_image | image_url: width: 1200, height: 630 }}">
  <meta name="twitter:image:alt" content="{{ page_image.alt | default: og_title_optimized | escape }}">
{%- elsif product.featured_image -%}
  <meta name="twitter:image" content="https:{{ product.featured_image | image_url: width: 1200, height: 630 }}">
  <meta name="twitter:image:alt" content="{{ product.title | escape }}">
{%- else -%}
  <meta name="twitter:image" content="{{ 'social-share-default.svg' | asset_url }}">
  <meta name="twitter:image:alt" content="{{ shop.name | escape }} - Personalized Video Messages from Africa">
{%- endif -%}

<!-- Additional SEO Meta Tags -->
<link rel="canonical" href="{{ og_url }}">
{%- if request.page_type == 'product' -%}
  <meta name="product:price:amount" content="{{ product.price | money_without_currency | strip_html }}">
  <meta name="product:price:currency" content="{{ cart.currency.iso_code }}">
  <meta name="product:availability" content="{% if product.available %}in stock{% else %}out of stock{% endif %}">
{%- endif -%}

<!-- Additional meta tags for better SEO -->
<meta name="theme-color" content="#ff6b35">
<meta name="msapplication-TileColor" content="#ff6b35">
<meta name="application-name" content="{{ shop.name }}">
<meta name="apple-mobile-web-app-title" content="{{ shop.name }}">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">

{%- if request.page_type == 'index' -%}
<!-- Enhanced Homepage specific meta tags -->
<meta name="geo.region" content="Global">
<meta name="geo.placename" content="Africa">
<meta name="geo.position" content="0;0">
<meta name="ICBM" content="0, 0">
<meta name="rating" content="general">
<meta name="distribution" content="global">
<meta name="audience" content="all">
<meta name="coverage" content="worldwide">
<meta name="target" content="all">
<meta name="HandheldFriendly" content="true">
<meta name="MobileOptimized" content="width">
<meta name="format-detection" content="telephone=no">

<!-- Business/Service specific meta tags -->
<meta name="category" content="Entertainment, Gifts, Video Services">
<meta name="classification" content="Video Messaging Service">
<meta name="subject" content="Personalized African Video Messages and Greetings">
<meta name="abstract" content="Custom video messages from Africa for birthdays, anniversaries, and special occasions">
<meta name="topic" content="Personalized Video Greetings">
<meta name="summary" content="Authentic African video messages to celebrate your special moments">
<meta name="owner" content="{{ shop.name }}">
<meta name="url" content="{{ shop.url }}">
<meta name="identifier-URL" content="{{ shop.url }}">
<meta name="directory" content="submission">
<meta name="pagename" content="{{ shop.name }} - Personalized African Video Messages">
<meta name="category" content="business">
<meta name="coverage" content="Worldwide">
{%- endif -%}
