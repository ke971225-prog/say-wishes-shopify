# PSI 抓取建议与故障排查

时间：2025-10-23 01:40:32

本次抓取失败，原因：无法连接到 Google PSI API（connect ETIMEDOUT），通常由网络防火墙或代理策略导致。

## 快速修复建议
- 网络白名单：允许访问 `*.googleapis.com`（443），包含 `www.googleapis.com` 与 `pagespeedonline.googleapis.com`。
- 运行环境：优先在可外网访问的环境或 CI（`ubuntu-latest`）执行，Node ≥ 18。
- 重试策略：可使用 `npm run psi:desktop -- <urls>` 先验证桌面端；网络恢复后再跑 `both`。
- 代理配置：企业代理需允许 HTTPS CONNECT 到 Google 域；若有 MITM 证书请正确安装。

## 备选方案
- 本地 Lighthouse：使用 Chrome DevTools 或 `lighthouse` CLI，采集核心指标（FCP/LCP/INP/TBT/CLS），以 JSON 归档。
- WebPageTest：在公共实例跑一次，记录瀑布与 LCP 时间线，以 PNG/JSON 归档。
- 远程代跑：若需要，我可在外网环境帮你代跑并将结果写入 `交付物`。

## 下一步
- 网络放行后，建议以首页、集合页（Top 系列）、主力产品页为清单，连续跑 3 次取中位数，并将结果写入：
  - `交付物/性能报告.md`（Markdown 汇总）
  - `交付物/psi-results.json`（原始 JSON）